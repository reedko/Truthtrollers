(()=>{console.log("Content script loaded and ready to receive messages!"),chrome.runtime.onMessage.addListener(((e,o,t)=>{if("toggleTaskCard"===e.action){const e=document.getElementById("popup-root");e&&(console.log("Toggling visibility of the popup"),e.classList.toggle("task-card-visible"),e.classList.toggle("task-card-hidden"))}return t({received:!0}),!0})),chrome.runtime.onMessage.addListener(((e,o,t)=>{"testMessage"===e.action&&(console.log("✅ Test message received in content.js:",e),t({success:!0,received:!0}))})),chrome.runtime.onMessage.addListener(((e,o,t)=>{if(console.log("📩 Received message in content.js:",e),"updatePopup"===e.action){console.log("🛠 Updating popup visibility...");let o=document.getElementById("popup-root");o||(o=document.createElement("div"),o.id="popup-root",document.body.appendChild(o)),o.className=e.isDetected||e.forceVisible?"task-card-visible":"task-card-hidden",console.log("✅ Popup updated in content.js")}})),chrome.runtime.onMessage.addListener(((e,o,t)=>{if("triggerCheckContent"===e.action){console.log("🔄 Content script received triggerCheckContent message:",e);const{forceVisible:o}=e;chrome.runtime.sendMessage({action:"checkContent",forceVisible:o})}return t({received:!0}),!0})),chrome.runtime.onMessage.addListener(((e,o,t)=>{"ping"===e.action&&t({status:"alive"})})),console.log("🔍 Monitoring for popups...");const e=()=>{const e=document.querySelector(".paywall, .popup, .modal, .adblock-popup");e&&(console.warn("⚠️ Popup detected! Attempting to remove..."),e.style.display="none",document.querySelector(".popup button.close")?.click())};new MutationObserver((o=>{o.forEach((o=>{document.querySelector(".paywall, .popup, .modal, .adblock-popup")&&e()}))})).observe(document.body,{childList:!0,subtree:!0}),e()})();